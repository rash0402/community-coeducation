---
title: 認定証検証システム設計書
category: 00_全体・要件定義
doc_type: 設計書
audience:
  - 事務局
version: "1.0"
status: 🔴Draft
created: 2025-12-03
updated: 2025-12-03
owner: 工学部第二部長
review_cycle: 年1回
---

# 認定証検証システム 設計書

## 1. 概要

### 1.1 目的

本システムは、地域共育プログラムの認定学生の資格状態を**リアルタイムで検証可能**にすることで、以下の課題を解決する。

| 課題 | 解決策 |
|------|--------|
| メール認定証の偽造リスク | ユニークIDによる検証 |
| 取消処分の強制力不足 | 検証ページでステータスを即時反映 |
| 企業側の確認手段不在 | Web検証ページの提供 |

### 1.2 システム構成

```
┌─────────────────────────────────────────────────────────────┐
│                    Google Workspace                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐  │
│  │ Google Forms │───▶│ スプレッドシート │◀───│ Google Apps  │  │
│  │ (認定テスト) │    │  (認定者DB)   │    │   Script     │  │
│  └──────────────┘    └───────┬──────┘    └──────────────┘  │
│                              │                              │
│                              ▼                              │
│                    ┌──────────────┐                         │
│                    │ Google Sites │                         │
│                    │ (検証ページ) │                         │
│                    └──────────────┘                         │
│                              │                              │
└──────────────────────────────┼──────────────────────────────┘
                               │
                               ▼
                    ┌──────────────┐
                    │   企業担当者  │
                    │  (検証実行)   │
                    └──────────────┘
```

---

## 2. 認定ID仕様

### 2.1 ID形式

```
TDU-YYYYT-NNNNN

TDU   : 固定プレフィックス（Tokyo Denki University）
YYYY  : 認定年度（西暦4桁）
T     : 学期（S=春学期, F=秋学期）
NNNNN : 連番（5桁、ゼロ埋め）
```

**例:**
- `TDU-2025S-00001` : 2025年春学期の1人目
- `TDU-2025F-00042` : 2025年秋学期の42人目

### 2.2 ID生成ルール

1. テスト合格時に自動採番（Google Apps Scriptで実装）
2. 同一学生の再認定時は新規IDを発行（旧IDは無効化）
3. IDは一意であり、重複しない

---

## 3. 認定者データベース（スプレッドシート）

### 3.1 シート構成

**シート名:** `認定者マスター`

| 列 | 項目名 | 型 | 説明 |
|:--:|--------|-----|------|
| A | 認定ID | 文字列 | `TDU-YYYYT-NNNNN`形式 |
| B | 学籍番号 | 文字列 | 学内システムの学籍番号 |
| C | 氏名 | 文字列 | 学生氏名（検証ページには非表示） |
| D | メールアドレス | 文字列 | 大学メール |
| E | 認定日 | 日付 | テスト合格日 |
| F | 有効期限 | 日付 | 認定日から1年後（自動計算） |
| G | ステータス | 文字列 | `有効` / `停止` / `取消` / `期限切れ` |
| H | ステータス更新日 | 日付 | 最終更新日 |
| I | 備考 | 文字列 | 取消理由など |

### 3.2 ステータス定義

| ステータス | 説明 | 検証ページ表示 |
|------------|------|----------------|
| **有効** | 認定資格あり | ✅ 認定有効（認定日・有効期限を表示） |
| **停止** | Lv.2処分（1学期間） | ⚠️ 資格停止中（再開予定日を表示） |
| **取消** | Lv.3処分（永久） | ❌ 資格取消済み |
| **期限切れ** | 有効期限超過 | ⏰ 有効期限切れ（再認定が必要） |

### 3.3 追加シート

**シート名:** `ステータス変更ログ`

| 列 | 項目名 | 説明 |
|:--:|--------|------|
| A | タイムスタンプ | 変更日時 |
| B | 認定ID | 対象学生 |
| C | 変更前ステータス | |
| D | 変更後ステータス | |
| E | 変更理由 | Lv.2/Lv.3の事由 |
| F | 操作者 | 事務局担当者名 |

---

## 4. 検証ページ仕様

### 4.1 URL構成

```
https://sites.google.com/dendai.ac.jp/kyoiku-ninsho/verify
```

### 4.2 画面設計

#### 入力画面

```
┌────────────────────────────────────────────┐
│  地域共育プログラム 認定証検証             │
├────────────────────────────────────────────┤
│                                            │
│  認定IDを入力してください                   │
│                                            │
│  ┌──────────────────────────────────┐      │
│  │ TDU-2025S-00001                  │      │
│  └──────────────────────────────────┘      │
│                                            │
│         [ 検証する ]                       │
│                                            │
│  ※ 認定IDは学生が提示するメールまたは      │
│    認定証画面に記載されています            │
│                                            │
└────────────────────────────────────────────┘
```

#### 結果画面（有効の場合）

```
┌────────────────────────────────────────────┐
│  検証結果                                  │
├────────────────────────────────────────────┤
│                                            │
│  ✅ 認定有効                               │
│                                            │
│  認定ID    : TDU-2025S-00001               │
│  認定日    : 2025年4月15日                 │
│  有効期限  : 2026年4月14日                 │
│                                            │
│  この学生は地域共育プログラムの            │
│  認定研修を修了しています。                │
│                                            │
│         [ 別のIDを検証 ]                   │
│                                            │
└────────────────────────────────────────────┘
```

#### 結果画面（停止の場合）

```
┌────────────────────────────────────────────┐
│  検証結果                                  │
├────────────────────────────────────────────┤
│                                            │
│  ⚠️ 資格停止中                             │
│                                            │
│  認定ID    : TDU-2025S-00001               │
│  停止開始  : 2025年6月1日                  │
│  停止終了  : 2025年9月30日（予定）         │
│                                            │
│  この学生は現在、認定資格が停止            │
│  されています。採用はお控えください。      │
│                                            │
│         [ 別のIDを検証 ]                   │
│                                            │
└────────────────────────────────────────────┘
```

#### 結果画面（取消の場合）

```
┌────────────────────────────────────────────┐
│  検証結果                                  │
├────────────────────────────────────────────┤
│                                            │
│  ❌ 資格取消済み                           │
│                                            │
│  認定ID    : TDU-2025S-00001               │
│                                            │
│  この学生の認定資格は取り消されて          │
│  います。本プログラムでの採用は            │
│  できません。                              │
│                                            │
│         [ 別のIDを検証 ]                   │
│                                            │
└────────────────────────────────────────────┘
```

#### 結果画面（ID不存在の場合）

```
┌────────────────────────────────────────────┐
│  検証結果                                  │
├────────────────────────────────────────────┤
│                                            │
│  ❓ 認定IDが見つかりません                 │
│                                            │
│  入力されたID: TDU-2025S-99999             │
│                                            │
│  以下をご確認ください:                     │
│  ・IDの入力ミスがないか                    │
│  ・学生が正しいIDを提示しているか          │
│                                            │
│         [ 再入力 ]                         │
│                                            │
└────────────────────────────────────────────┘
```

### 4.3 セキュリティ要件

| 要件 | 対策 |
|------|------|
| 総当たり攻撃対策 | 連続10回の検証失敗でIP一時ブロック |
| 情報漏洩防止 | 検証結果に氏名・学籍番号は表示しない |
| アクセスログ | 全検証リクエストをログに記録 |

---

## 5. 認定フロー

### 5.1 新規認定

```
学生がGoogle Formsでテスト受験
            ↓
      70点以上で合格
            ↓
Google Apps Scriptが自動実行
  ├─ 認定IDを採番
  ├─ スプレッドシートに記録（ステータス=有効）
  └─ 学生に認定メールを自動送信
            ↓
学生は認定IDをメモ/保存
            ↓
企業への応募時に認定IDを提示
            ↓
企業が検証ページで確認
```

### 5.2 認定メールテンプレート

```
件名: 【地域共育プログラム】認定研修 合格通知

{{学生氏名}} 様

地域共育プログラム認定研修の合格をお知らせします。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【あなたの認定ID】

    {{認定ID}}

※ このIDは企業への応募時に必要です。
※ スクリーンショットを保存するか、このメールを保管してください。
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

認定日    : {{認定日}}
有効期限  : {{有効期限}}

【次のステップ】
1. 下記URLから求人情報を確認
   {{求人リストURL}}

2. 興味のある企業に直接連絡
   ※ 連絡時に認定IDを伝えてください

3. 面接時に認定IDを提示
   ※ 企業がオンラインで有効性を確認します

【注意事項】
・認定IDは他人に貸与しないでください
・規約違反があった場合、認定は取り消されます
・有効期限が切れた場合は再受験が必要です

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
東京電機大学 工学部第二部
地域共育プログラム事務局
```

---

## 6. 取消・停止フロー

### 6.1 Lv.2処分（1学期間停止）

```
企業からトラブル報告（勤務態度不良など）
            ↓
事務局が事実確認
            ↓
スプレッドシートを更新
  ├─ ステータス: 有効 → 停止
  ├─ 備考: 停止理由を記入
  └─ ログシートに記録
            ↓
学生に停止通知メールを送信
            ↓
【停止期間終了後】
  ├─ 反省レポート提出
  └─ 事務局面談
            ↓
ステータス: 停止 → 有効（新規IDで再発行）
```

### 6.2 Lv.3処分（永久取消）

```
重大な違反報告（ハラスメント、情報漏洩など）
            ↓
事務局・専門部署が事実確認
            ↓
スプレッドシートを更新
  ├─ ステータス: 有効 → 取消
  ├─ 備考: 取消理由を記入
  └─ ログシートに記録
            ↓
学生に取消通知メールを送信
            ↓
【再認定不可】
```

### 6.3 停止通知メールテンプレート

```
件名: 【重要】地域共育プログラム 認定資格の停止について

{{学生氏名}} 様

あなたの地域共育プログラム認定資格について、
以下の通り停止処分を行いましたのでお知らせします。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【処分内容】

認定ID    : {{認定ID}}
処分種別  : 認定資格の停止（Lv.2）
停止期間  : {{停止開始日}} 〜 {{停止終了日}}
事由      : {{停止理由}}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【停止期間中の制限】
・本プログラムの求人への応募はできません
・認定IDによる検証は「停止中」と表示されます

【資格再開の手続き】
停止期間終了後、以下の手続きにより資格を再開できます。
1. 反省レポートの提出
2. 事務局との面談

詳細は停止期間終了前にご連絡します。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
東京電機大学 工学部第二部
地域共育プログラム事務局
```

---

## 7. 運用要件

### 7.1 事務局の作業

| 作業 | 頻度 | 所要時間 |
|------|------|----------|
| 有効期限切れの確認・更新 | 月1回 | 10分 |
| トラブル報告による停止処理 | 随時 | 5分/件 |
| 停止解除の処理 | 学期末 | 30分 |

### 7.2 自動化対象

| 処理 | 自動化方法 |
|------|------------|
| 認定ID採番 | Google Apps Script（トリガー: フォーム送信時） |
| 認定メール送信 | Google Apps Script |
| 有効期限切れ判定 | Google Apps Script（トリガー: 毎日） |
| 検証ページ応答 | Google Apps Script（Web App） |

---

## 8. 実装スケジュール

| フェーズ | 内容 | 成果物 |
|----------|------|--------|
| Phase 1 | スプレッドシート設計 | 認定者マスター、ログシート |
| Phase 2 | Google Apps Script開発 | ID採番、メール送信、検証API |
| Phase 3 | 検証ページ構築 | Google Sites |
| Phase 4 | テスト・マニュアル整備 | 運用マニュアル更新 |

---

## 9. 関連ドキュメント

- [00_プロジェクト_定義](00_プロジェクト_定義.md) - プロジェクト全体定義
- [10_トリアージ_規定](10_トリアージ_規定.md) - トラブル対応レベル
- [11_事務局運用_マニュアル](11_事務局運用_マニュアル.md) - 事務局の操作手順
- [30_学生研修_資料](30_学生研修_資料.md) - 学生向け認定ID説明
- [42_企業向け_ガイド](42_企業向け_ガイド.md) - 企業向け検証方法
